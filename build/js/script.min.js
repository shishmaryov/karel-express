window.addEventListener("DOMContentLoaded",function(){const t="select_show",o="select__option_selected",s=".select_show",r=".select__option_selected";class l{constructor(e,t){this._elRoot="string"==typeof e?document.querySelector(e):e,this._params=t||{},this._onClickFn=this._onClick.bind(this),this._params.options&&(this._elRoot.classList.add("select"),this._elRoot.innerHTML=l.template(this._params)),this._elToggle=this._elRoot.querySelector('[data-select="toggle"]'),this._elRoot.addEventListener("click",this._onClickFn)}_onClick(e){const t=e.target;switch(t.closest("[data-select]").dataset.select){case"toggle":this.toggle();break;case"option":this._changeValue(t)}}_update(e){e=e.closest(".select__option");const t=this._elRoot.querySelector(r);return t&&t.classList.remove(o),e.classList.add(o),this._elToggle.textContent=e.textContent,this._elToggle.value=e.dataset.value,this._elToggle.dataset.index=e.dataset.index,this._elRoot.dispatchEvent(new CustomEvent("select.change")),this._params.onSelected&&this._params.onSelected(this,e),e.dataset.value}_reset(){const e=this._elRoot.querySelector(r);return e&&e.classList.remove(o),this._elToggle.textContent="Выберите из списка",this._elToggle.value="",this._elToggle.dataset.index=-1,this._elRoot.dispatchEvent(new CustomEvent("select.change")),this._params.onSelected&&this._params.onSelected(this,null),""}_changeValue(e){e.classList.contains(o)||(this._update(e),this.hide())}show(){document.querySelectorAll(s).forEach(e=>{e.classList.remove(t)}),this._elRoot.classList.add(t)}hide(){this._elRoot.classList.remove(t)}toggle(){this._elRoot.classList.contains(t)?this.hide():this.show()}dispose(){this._elRoot.removeEventListener("click",this._onClickFn)}get value(){return this._elToggle.value}set value(t){let o=!1;if(this._elRoot.querySelectorAll(".select__option").forEach(e=>{if(e.dataset.value===t)return o=!0,this._update(e)}),!o)return this._reset()}get selectedIndex(){return this._elToggle.dataset.index}set selectedIndex(e){e=this._elRoot.querySelector(`.select__option[data-index="${e}"]`);return e?this._update(e):this._reset()}}l.template=e=>{var t=e.name;const o=e.options,s=e.targetValue;let r=[],l=-1,c="",n="Выберите из списка";return o.forEach((e,t)=>{let o="";e[0]===s&&(o=" select__option_selected",l=t,c=e[0],n=e[1]),r.push(`<li class="select__option${o}" data-select="option" data-value="${e[0]}" data-index="${t}">${e[1]}</li>`)}),`<button type="button" class="select__toggle" name="${t}" value="${c}" data-select="toggle" data-index="${l}">${n}</button>
	<div class="select__dropdown">
	<ul class="select__options">${r.join("")}</ul>
</div>`},document.addEventListener("click",e=>{e.target.closest(".select")||document.querySelectorAll(s).forEach(e=>{e.classList.remove(t)})});new l("#select-1",{name:"weight",targetValue:"1,5 tons",options:[["1,5 tons","До 1,5 тонн"],["2 tons","До 2 тонн"],["5 tons","До 5 тонн"]]}),new l("#select-2",{name:"length",targetValue:"3 m",options:[["3 m","3 m"],["4 m","4 m"]]}),new l("#select-3",{name:"heigth",targetValue:"1,6 m",options:[["1,6 m","1,6 m"],["1,8 m","1,8 m"],["2,2 m","2,2 m"]]}),new l("#select-4",{name:"passengers",targetValue:"0",options:[["0","Нет"],["1","1"],["2","2"]]}),new l("#select-5",{name:"movers",targetValue:"0",options:[["0","Нет"],["1","1"],["2","2"]]}),new l("#select-6"),document.querySelector(".submenu--else").addEventListener("mouseover",function(){document.querySelector(".header__else > img").src="img/icons/else-active.svg"}),document.querySelector(".submenu--else").addEventListener("mouseout",function(){document.querySelector(".header__else > img").src="img/icons/else.svg"}),new l("#select-7",{name:"urgency",targetValue:"20 min",options:[["20 min","От 20 минут"],["1 hour","1 час"],["2 hours","2 часа"],["other","Другое"]]});let e=document.querySelector(".header__burger");function c(e,t){document.querySelector(e).addEventListener("click",function(){document.querySelector(t+"> .header__sublist").classList.toggle("header__sublist--active"),document.querySelector(e).classList.toggle("submenu__title--active"),document.querySelector(t+"> .menu__link").classList.toggle("menu__link--active")})}e.addEventListener("click",function(){e.classList.toggle("header__burger--active"),document.querySelector(".header--mobile .header__bottom").classList.toggle("header__bottom--active")}),c(".header--mobile .submenu__title--geo",".header--mobile .submenu--geo"),c(".header--mobile .submenu__title--services",".header--mobile .submenu--services");let n=document.querySelector(".header--mobile  .header__sublist--else"),a=document.querySelector(".header--mobile .submenu--else img");document.querySelector(".header--mobile .header__else").addEventListener("click",function(){n.classList.toggle("header__sublist--active"),a.classList.toggle("active"),a.classList.contains("active")?a.src="../img/icons/else-active.svg":a.src="../img/icons/else.svg"}),document.querySelector(".promo-form__actual-link").addEventListener("click",function(){document.querySelector("#select-6").classList.toggle("select--active"),document.querySelector(".promo-form__actual-link").classList.toggle("promo-form__actual-link--absolute"),document.querySelector("#select-6").classList.contains("select--active")?document.querySelector(".promo-form__actual-link").textContent="Вернуться":document.querySelector(".promo-form__actual-link").textContent="Выбрать из списка"}),document.querySelector("#select-6 .select__toggle").addEventListener("click",function(){document.querySelector(".promo-form__actual-link").classList.toggle("promo-form__actual-link--absolute")}),document.querySelector("#time").placeholder=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"numeric",minute:"numeric"});var i=new Date,u=String(i.getDate()).padStart(2,"0"),i=String(i.getMonth()+1).padStart(2,"0")+"."+u+"."+i.getFullYear();document.querySelector("#date").placeholder=i,IMask(document.getElementById("phone"),{mask:"+{7} (000) 000 - 00 - 00"}),document.getElementById("time").addEventListener("click",function(){IMask(document.getElementById("time"),{mask:"00{:}00",lazy:!1})}),new l("#select-8",{name:"duration",targetValue:"1 hour",options:[["1 hour","1 час"],["2 hours","2 часа"],["3 hours","3 часа"]]});window.screen.availWidth<1023?new AirDatepicker("#date",{isMobile:!0}):new AirDatepicker("#date");const d=new JustValidate("#promo-form",{errorFieldCssClass:"is-invalid"});let m=document.querySelectorAll(".promo-form__input--hidden"),_=document.querySelector(".promo-form"),h=document.querySelector(".promo-form__clean"),g=document.querySelectorAll(".promo-form div"),p=document.querySelectorAll(".promo-form__block");for(let e=0;e<g.length;e++)g[e].addEventListener("click",function(){_.classList.add("promo-form--active");for(let e=0;e<m.length;e++)m[e].classList.add("promo-form__input--active");for(let e=0;e<p.length;e++)p[e].classList.add("promo-form__block--active")});h.addEventListener("click",function(){_.classList.remove("promo-form--active"),document.querySelector("#promo-form").reset();for(let e=0;e<m.length;e++)m[e].classList.remove("promo-form__input--active");for(let e=0;e<p.length;e++)p[e].classList.remove("promo-form__block--active");d.refresh()}),d.addField("#name",[{rule:"required",errorMessage:" "}]).addField("#phone",[{rule:"required",errorMessage:" "}]).addRequiredGroup(".promo-form__stops","Введите адрес").onSuccess(e=>{{var t=document.querySelector("#promo-form");t=new FormData(t);let e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&console.log("Отправлено")},e.open("POST","../mail.php",!0),e.send(t),document.querySelector("#promo-form").reset(),d.refresh()}_.classList.remove("promo-form--active"),document.querySelector("#promo-form").reset();for(let e=0;e<m.length;e++)m[e].classList.remove("promo-form__input--active");for(let e=0;e<p.length;e++)p[e].classList.remove("promo-form__block--active");d.refresh()});for(let e=0;e<document.querySelectorAll(".promo-form__stops input").length;e++)document.querySelectorAll(".promo-form__stops input")[e].addEventListener("change",function(){d.removeGroup(".promo-form__stops")});document.querySelector(".promo-form__button").addEventListener("click",function(){setTimeout(function(){1==document.querySelector("#name").classList.contains("is-invalid")&&(document.querySelector("#name").placeholder="Введите имя"),1==document.querySelector("#phone").classList.contains("is-invalid")&&(document.querySelector("#phone").placeholder="Введите телефон")},500)}),document.querySelector(".promo-form__add-adress").addEventListener("click",function(){let e=document.createElement("div");e.innerHTML=document.querySelector("#middleStop").innerHTML,document.querySelector(".promo-form__stops").insertBefore(e,document.querySelector(".promo-form__stops").children[1])});const v=document.querySelector(".tabs"),f=document.querySelectorAll(".tabs__btn"),S=document.querySelectorAll(".tabs__content"),y=(v&&v.addEventListener("click",e=>{e.target.classList.contains("tabs__btn")&&(e=e.target.dataset.tabsPath,f.forEach(e=>{e.classList.remove("tabs__btn--active")}),document.querySelector(`[data-tabs-path="${e}"]`).classList.add("tabs__btn--active"),y(e))}),e=>{S.forEach(e=>{e.classList.remove("tabs__content--active")}),document.querySelector(`[data-tabs-target="${e}"]`).classList.add("tabs__content--active")})});