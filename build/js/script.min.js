window.addEventListener("DOMContentLoaded",()=>{var e=[].slice.call(document.querySelectorAll('a[href*="#"]'));e.forEach(function(s){s.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(s.getAttribute("href")).getBoundingClientRect().top+window.pageYOffset,o=setInterval(function(){var e=t/60;e>window.pageYOffset-t&&window.innerHeight+window.pageYOffset<document.body.offsetHeight?window.scrollBy(0,e):(window.scrollTo(0,t),clearInterval(o))},500/60)})});let t=document.querySelector(".header__burger");function o(e,t){document.querySelector(e).addEventListener("click",function(){document.querySelector(t+"> .header__sublist").classList.toggle("header__sublist--active"),document.querySelector(e).classList.toggle("submenu__title--active"),document.querySelector(t+"> .menu__link").classList.toggle("menu__link--active")})}t.addEventListener("click",function(){t.classList.toggle("header__burger--active"),document.querySelector(".header--mobile .header__bottom").classList.toggle("header__bottom--active")}),o(".header--mobile .submenu__title--geo",".header--mobile .submenu--geo"),o(".header--mobile .submenu__title--services",".header--mobile .submenu--services");let s=".footer .submenu__title--geo",n=".footer .submenu--geo",i=(document.querySelector(s).addEventListener("click",function(){document.querySelector(n+"> .footer__sublist").classList.toggle("footer__sublist--active"),document.querySelector(s).classList.toggle("submenu__title--active"),document.querySelector(n+"> .menu__link").classList.toggle("menu__link--active")}),document.querySelector(".header--mobile  .header__sublist--else")),r=document.querySelector(".header--mobile .submenu--else img"),l=(document.querySelector(".header--mobile .header__else").addEventListener("click",function(){i.classList.toggle("header__sublist--active"),r.classList.toggle("active"),r.classList.contains("active")?r.src="../img/icons/else-active.svg":r.src="../img/icons/else.svg"}),document.createElement("div")),c=(l.innerHTML=document.querySelector("#promo-form__name-phone").innerHTML,l.classList.add("promo-form__way"),l.classList.add("promo-form__way--no-icon"),document.createElement("div"));c.innerHTML=document.querySelector("#promo-form__car-insert").innerHTML,c.classList.add("promo-form__block"),window.screen.availWidth<1023?(document.querySelector("#promo-form").insertBefore(l,document.querySelector("#promo-form").children[3]),document.querySelector("#promo-form").insertBefore(c,document.querySelector("#promo-form").children[5])):(document.querySelector("#promo-form").insertBefore(l,document.querySelector("#promo-form").children[5]),document.querySelector("#promo-form").insertBefore(c,document.querySelector("#promo-form").children[6]));const a="select_show",d="select__option_selected",u=".select_show",m=".select__option_selected";class h{constructor(e,t){this._elRoot="string"==typeof e?document.querySelector(e):e,this._params=t||{},this._onClickFn=this._onClick.bind(this),this._params.options&&(this._elRoot.classList.add("select"),this._elRoot.innerHTML=h.template(this._params)),this._elToggle=this._elRoot.querySelector('[data-select="toggle"]'),this._elRoot.addEventListener("click",this._onClickFn)}_onClick(e){const t=e.target;switch(t.closest("[data-select]").dataset.select){case"toggle":this.toggle();break;case"option":this._changeValue(t)}}_update(e){e=e.closest(".select__option");const t=this._elRoot.querySelector(m);return t&&t.classList.remove(d),e.classList.add(d),this._elToggle.textContent=e.textContent,this._elToggle.value=e.dataset.value,this._elToggle.dataset.index=e.dataset.index,this._elRoot.dispatchEvent(new CustomEvent("select.change")),this._params.onSelected&&this._params.onSelected(this,e),e.dataset.value}_reset(){const e=this._elRoot.querySelector(m);return e&&e.classList.remove(d),this._elToggle.textContent="Выберите из списка",this._elToggle.value="",this._elToggle.dataset.index=-1,this._elRoot.dispatchEvent(new CustomEvent("select.change")),this._params.onSelected&&this._params.onSelected(this,null),""}_changeValue(e){e.classList.contains(d)||(this._update(e),this.hide())}show(){document.querySelectorAll(u).forEach(e=>{e.classList.remove(a)}),this._elRoot.classList.add(a)}hide(){this._elRoot.classList.remove(a)}toggle(){this._elRoot.classList.contains(a)?this.hide():this.show()}dispose(){this._elRoot.removeEventListener("click",this._onClickFn)}get value(){return this._elToggle.value}set value(t){let o=!1;if(this._elRoot.querySelectorAll(".select__option").forEach(e=>{if(e.dataset.value===t)return o=!0,this._update(e)}),!o)return this._reset()}get selectedIndex(){return this._elToggle.dataset.index}set selectedIndex(e){e=this._elRoot.querySelector(`.select__option[data-index="${e}"]`);return e?this._update(e):this._reset()}}h.template=e=>{var t=e.name;const o=e.options,s=e.targetValue;let n=[],i=-1,r="",l="Выберите из списка";return o.forEach((e,t)=>{let o="";e[0]===s&&(o=" select__option_selected",i=t,r=e[0],l=e[1]),n.push(`<li class="select__option${o}" data-select="option" data-value="${e[0]}" data-index="${t}">${e[1]}</li>`)}),`<button type="button" class="select__toggle" name="${t}" value="${r}" data-select="toggle" data-index="${i}">${l}</button>
	<div class="select__dropdown">
	<ul class="select__options">${n.join("")}</ul>
</div>`},document.addEventListener("click",e=>{e.target.closest(".select")||document.querySelectorAll(u).forEach(e=>{e.classList.remove(a)})});new h("#select-1",{name:"weight",targetValue:"1,5 tons",options:[["1,5 tons","До 1,5 тонн"],["2 tons","До 2 тонн"],["5 tons","До 5 тонн"]]}),new h("#select-2",{name:"length",targetValue:"3 m",options:[["3 m","3 m"],["4 m","4 m"]]}),new h("#select-3",{name:"heigth",targetValue:"1,6 m",options:[["1,6 m","1,6 m"],["1,8 m","1,8 m"],["2,2 m","2,2 m"]]}),new h("#select-4",{name:"passengers",targetValue:"0",options:[["0","Нет"],["1","1"],["2","2"]]}),new h("#select-5",{name:"movers",targetValue:"0",options:[["0","Нет"],["1","1"],["2","2"]]}),new h("#select-6"),document.querySelector(".submenu--else").addEventListener("mouseover",function(){document.querySelector(".header__else > img").src="img/icons/else-active.svg"}),document.querySelector(".submenu--else").addEventListener("mouseout",function(){document.querySelector(".header__else > img").src="img/icons/else.svg"}),new h("#select-7",{name:"urgency",targetValue:"20 min",options:[["20 min","От 20 минут"],["1 hour","1 час"],["2 hours","2 часа"],["other","Другое"]]}),new h("#select-8",{name:"duration",targetValue:"1 hour",options:[["1 hour","1 час"],["2 hours","2 часа"],["3 hours","3 часа"]]});document.querySelector(".promo-form__actual-link").addEventListener("click",function(){document.querySelector("#select-6").classList.toggle("select--active"),document.querySelector(".promo-form__actual-link").classList.toggle("promo-form__actual-link--absolute"),document.querySelector("#select-6").classList.contains("select--active")?document.querySelector(".promo-form__actual-link").textContent="Вернуться":document.querySelector(".promo-form__actual-link").textContent="Выбрать из списка"}),document.querySelector("#select-6 .select__toggle").addEventListener("click",function(){document.querySelector(".promo-form__actual-link").classList.toggle("promo-form__actual-link--absolute")}),document.querySelector("#time").placeholder=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"numeric",minute:"numeric"});var e=new Date,p=String(e.getDate()).padStart(2,"0"),e=String(e.getMonth()+1).padStart(2,"0")+"."+p+"."+e.getFullYear();document.querySelector("#date").placeholder=e,IMask(document.getElementById("phone"),{mask:"+{7} (000) 000 - 00 - 00"});let _=document.querySelectorAll(".promo-form__input--hidden"),g=document.querySelector(".promo-form"),f=document.querySelector(".promo-form__clean"),v=document.querySelectorAll(".promo-form div"),y=document.querySelectorAll(".promo-form__block");for(let e=0;e<v.length;e++)v[e].addEventListener("click",function(){g.classList.add("promo-form--active");for(let e=0;e<_.length;e++)_[e].classList.add("promo-form__input--active");for(let e=0;e<y.length;e++)y[e].classList.add("promo-form__block--active")});f.addEventListener("click",function(){window.screen.availWidth<1023?document.querySelector(".services").style.paddingTop="390px":document.querySelector(".services").style.paddingTop="150px",g.classList.remove("promo-form--active"),document.querySelector("#promo-form").reset();for(let e=0;e<_.length;e++)_[e].classList.remove("promo-form__input--active");for(let e=0;e<y.length;e++)y[e].classList.remove("promo-form__block--active");S.refresh()}),document.getElementById("time").addEventListener("click",function(){IMask(document.getElementById("time"),{mask:"00{:}00",lazy:!1})}),window.screen.availWidth<1023?new AirDatepicker("#date",{isMobile:!0}):new AirDatepicker("#date",{position:"bottom right"});const S=new JustValidate("#promo-form",{errorFieldCssClass:"is-invalid"});S.addField("#name",[{rule:"required",errorMessage:" "}]).addField("#phone",[{rule:"required",errorMessage:" "}]).addRequiredGroup(".promo-form__stops"," ").onSuccess(e=>{{var t=document.querySelector("#promo-form");t=new FormData(t);let e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&console.log("Отправлено")},e.open("POST","../mail.php",!0),e.send(t),document.querySelector("#promo-form").reset(),S.refresh()}g.classList.remove("promo-form--active"),document.querySelector("#promo-form").reset();for(let e=0;e<_.length;e++)_[e].classList.remove("promo-form__input--active");for(let e=0;e<y.length;e++)y[e].classList.remove("promo-form__block--active");S.refresh()});for(let e=0;e<document.querySelectorAll(".promo-form__stops input").length;e++)document.querySelectorAll(".promo-form__stops input")[e].addEventListener("change",function(){S.removeGroup(".promo-form__stops")});document.querySelector(".promo-form__button").addEventListener("click",function(){setTimeout(function(){1==document.querySelector("#name").classList.contains("is-invalid")&&(document.querySelector("#name").placeholder="Введите имя"),1==document.querySelector("#phone").classList.contains("is-invalid")&&(document.querySelector("#phone").placeholder="Введите телефон")},500)}),document.querySelector(".promo-form__add-adress").addEventListener("click",function(){let e=document.createElement("div");e.innerHTML=document.querySelector("#middleStop").innerHTML,document.querySelector(".promo-form__stops").insertBefore(e,document.querySelector(".promo-form__stops").children[1]),$(".promo-form__input--address").suggestions({token:"3b5a250afeed87ba3c5782b639296f750d220161",type:"ADDRESS",onSelect:function(e){console.log(e)}})}),$(".promo-form__input--address").suggestions({token:"3b5a250afeed87ba3c5782b639296f750d220161",type:"ADDRESS",onSelect:function(e){console.log(e)}});class L{constructor(e){this.options=Object.assign({isOpen:()=>{},isClose:()=>{}},e),this.modal=document.querySelector(".modal"),this.speed=!1,this.animation=!1,this._reOpen=!1,this._nextContainer=!1,this.modalContainer=!1,this.isOpen=!1,this.previousActiveElement=!1,this._focusElements=["a[href]","input","select","textarea","button","iframe","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this._fixBlocks=document.querySelectorAll(".fix-block"),this.events()}events(){this.modal&&(document.addEventListener("click",function(e){var t,o,s=e.target.closest("[data-graph-path]");if(s)return t=s.dataset.graphPath,o=s.dataset.graphAnimation,s=s.dataset.graphSpeed,this.animation=o||"fade",this.speed=s?parseInt(s):300,this._nextContainer=document.querySelector(`[data-graph-target="${t}"]`),void this.open();e.target.closest(".modal__close")&&this.close()}.bind(this)),window.addEventListener("keydown",function(e){27==e.keyCode&&this.modalContainer.classList.contains("modal-open")&&this.close(),9==e.which&&this.isOpen&&this.focusCatch(e)}.bind(this)),this.modal.addEventListener("click",function(e){e.target.classList.contains("modal__container")||e.target.closest(".modal__container")||!this.isOpen||this.close()}.bind(this)))}open(e){if(this.previousActiveElement=document.activeElement,this.isOpen)return this.reOpen=!0,void this.close();this.modalContainer=this._nextContainer,e&&(this.modalContainer=document.querySelector(`[data-graph-target="${e}"]`)),this.modal.style.setProperty("--transition-time",this.speed/1e3+"s"),this.modal.classList.add("is-open"),this.disableScroll(),this.modalContainer.classList.add("modal-open"),this.modalContainer.classList.add(this.animation),setTimeout(()=>{this.options.isOpen(this),this.modalContainer.classList.add("animate-open"),this.isOpen=!0,this.focusTrap()},this.speed)}close(){this.modalContainer&&(this.modalContainer.classList.remove("animate-open"),this.modalContainer.classList.remove(this.animation),this.modal.classList.remove("is-open"),this.modalContainer.classList.remove("modal-open"),this.enableScroll(),this.options.isClose(this),this.isOpen=!1,this.focusTrap(),this.reOpen&&(this.reOpen=!1,this.open()))}focusCatch(e){var t=this.modalContainer.querySelectorAll(this._focusElements);const o=Array.prototype.slice.call(t);t=o.indexOf(document.activeElement);e.shiftKey&&0===t&&(o[o.length-1].focus(),e.preventDefault()),e.shiftKey||t!==o.length-1||(o[0].focus(),e.preventDefault())}focusTrap(){const e=this.modalContainer.querySelectorAll(this._focusElements);this.isOpen?e.length&&e[0].focus():this.previousActiveElement.focus()}disableScroll(){var e=window.scrollY;this.lockPadding(),document.body.classList.add("disable-scroll"),document.body.dataset.position=e,document.body.style.top=-e+"px"}enableScroll(){var e=parseInt(document.body.dataset.position,10);this.unlockPadding(),document.body.style.top="auto",document.body.classList.remove("disable-scroll"),window.scroll({top:e,left:0}),document.body.removeAttribute("data-position")}lockPadding(){let t=window.innerWidth-document.body.offsetWidth+"px";this._fixBlocks.forEach(e=>{e.style.paddingRight=t}),document.body.style.paddingRight=t}unlockPadding(){this._fixBlocks.forEach(e=>{e.style.paddingRight="0px"}),document.body.style.paddingRight="0px"}}document.addEventListener("DOMContentLoaded",()=>{new L({isOpen:e=>{console.log("opened")},isClose:()=>{console.log("closed")}})})});