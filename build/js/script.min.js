window.addEventListener("DOMContentLoaded",function(){let e=document.createElement("div"),t=(e.innerHTML=document.querySelector("#promo-form__name-phone").innerHTML,e.classList.add("promo-form__way"),e.classList.add("promo-form__way--no-icon"),document.createElement("div"));t.innerHTML=document.querySelector("#promo-form__car-insert").innerHTML,t.classList.add("promo-form__block"),window.screen.availWidth<1023?(document.querySelector("#promo-form").insertBefore(e,document.querySelector("#promo-form").children[3]),document.querySelector("#promo-form").insertBefore(t,document.querySelector("#promo-form").children[5])):(document.querySelector("#promo-form").insertBefore(e,document.querySelector("#promo-form").children[5]),document.querySelector("#promo-form").insertBefore(t,document.querySelector("#promo-form").children[6])),window.screen.availWidth<1139?new Swiper(".reviews__slider",{slidesPerView:1,direction:"horizontal",loop:!0,allowTouchMove:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}):new Swiper(".reviews__slider",{slidesPerView:2,spaceBetween:30,direction:"horizontal",loop:!0,allowTouchMove:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});var o=[].slice.call(document.querySelectorAll('a[href*="#"]'));o.forEach(function(r){r.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(r.getAttribute("href")).getBoundingClientRect().top+window.pageYOffset,o=setInterval(function(){var e=t/60;e>window.pageYOffset-t&&window.innerHeight+window.pageYOffset<document.body.offsetHeight?window.scrollBy(0,e):(window.scrollTo(0,t),clearInterval(o))},500/60)})});const r="select_show",s="select__option_selected",n=".select_show",c=".select__option_selected";class l{constructor(e,t){this._elRoot="string"==typeof e?document.querySelector(e):e,this._params=t||{},this._onClickFn=this._onClick.bind(this),this._params.options&&(this._elRoot.classList.add("select"),this._elRoot.innerHTML=l.template(this._params)),this._elToggle=this._elRoot.querySelector('[data-select="toggle"]'),this._elRoot.addEventListener("click",this._onClickFn)}_onClick(e){const t=e.target;switch(t.closest("[data-select]").dataset.select){case"toggle":this.toggle();break;case"option":this._changeValue(t)}}_update(e){e=e.closest(".select__option");const t=this._elRoot.querySelector(c);return t&&t.classList.remove(s),e.classList.add(s),this._elToggle.textContent=e.textContent,this._elToggle.value=e.dataset.value,this._elToggle.dataset.index=e.dataset.index,this._elRoot.dispatchEvent(new CustomEvent("select.change")),this._params.onSelected&&this._params.onSelected(this,e),e.dataset.value}_reset(){const e=this._elRoot.querySelector(c);return e&&e.classList.remove(s),this._elToggle.textContent="Выберите из списка",this._elToggle.value="",this._elToggle.dataset.index=-1,this._elRoot.dispatchEvent(new CustomEvent("select.change")),this._params.onSelected&&this._params.onSelected(this,null),""}_changeValue(e){e.classList.contains(s)||(this._update(e),this.hide())}show(){document.querySelectorAll(n).forEach(e=>{e.classList.remove(r)}),this._elRoot.classList.add(r)}hide(){this._elRoot.classList.remove(r)}toggle(){this._elRoot.classList.contains(r)?this.hide():this.show()}dispose(){this._elRoot.removeEventListener("click",this._onClickFn)}get value(){return this._elToggle.value}set value(t){let o=!1;if(this._elRoot.querySelectorAll(".select__option").forEach(e=>{if(e.dataset.value===t)return o=!0,this._update(e)}),!o)return this._reset()}get selectedIndex(){return this._elToggle.dataset.index}set selectedIndex(e){e=this._elRoot.querySelector(`.select__option[data-index="${e}"]`);return e?this._update(e):this._reset()}}l.template=e=>{var t=e.name;const o=e.options,r=e.targetValue;let s=[],n=-1,c="",l="Выберите из списка";return o.forEach((e,t)=>{let o="";e[0]===r&&(o=" select__option_selected",n=t,c=e[0],l=e[1]),s.push(`<li class="select__option${o}" data-select="option" data-value="${e[0]}" data-index="${t}">${e[1]}</li>`)}),`<button type="button" class="select__toggle" name="${t}" value="${c}" data-select="toggle" data-index="${n}">${l}</button>
	<div class="select__dropdown">
	<ul class="select__options">${s.join("")}</ul>
</div>`},document.addEventListener("click",e=>{e.target.closest(".select")||document.querySelectorAll(n).forEach(e=>{e.classList.remove(r)})});new l("#select-1",{name:"weight",targetValue:"1,5 tons",options:[["1,5 tons","До 1,5 тонн"],["2 tons","До 2 тонн"],["5 tons","До 5 тонн"]]}),new l("#select-2",{name:"length",targetValue:"3 m",options:[["3 m","3 m"],["4 m","4 m"]]}),new l("#select-3",{name:"heigth",targetValue:"1,6 m",options:[["1,6 m","1,6 m"],["1,8 m","1,8 m"],["2,2 m","2,2 m"]]}),new l("#select-4",{name:"passengers",targetValue:"0",options:[["0","Нет"],["1","1"],["2","2"]]}),new l("#select-5",{name:"movers",targetValue:"0",options:[["0","Нет"],["1","1"],["2","2"]]}),new l("#select-6"),document.querySelector(".submenu--else").addEventListener("mouseover",function(){document.querySelector(".header__else > img").src="img/icons/else-active.svg"}),document.querySelector(".submenu--else").addEventListener("mouseout",function(){document.querySelector(".header__else > img").src="img/icons/else.svg"}),new l("#select-7",{name:"urgency",targetValue:"20 min",options:[["20 min","От 20 минут"],["1 hour","1 час"],["2 hours","2 часа"],["other","Другое"]]});let i=document.querySelector(".header__burger");function a(e,t){document.querySelector(e).addEventListener("click",function(){document.querySelector(t+"> .header__sublist").classList.toggle("header__sublist--active"),document.querySelector(e).classList.toggle("submenu__title--active"),document.querySelector(t+"> .menu__link").classList.toggle("menu__link--active")})}i.addEventListener("click",function(){i.classList.toggle("header__burger--active"),document.querySelector(".header--mobile .header__bottom").classList.toggle("header__bottom--active")}),a(".header--mobile .submenu__title--geo",".header--mobile .submenu--geo"),a(".header--mobile .submenu__title--services",".header--mobile .submenu--services");let u=".footer .submenu__title--geo",d=".footer .submenu--geo",m=(document.querySelector(u).addEventListener("click",function(){document.querySelector(d+"> .footer__sublist").classList.toggle("footer__sublist--active"),document.querySelector(u).classList.toggle("submenu__title--active"),document.querySelector(d+"> .menu__link").classList.toggle("menu__link--active")}),document.querySelector(".header--mobile  .header__sublist--else")),_=document.querySelector(".header--mobile .submenu--else img");document.querySelector(".header--mobile .header__else").addEventListener("click",function(){m.classList.toggle("header__sublist--active"),_.classList.toggle("active"),_.classList.contains("active")?_.src="../img/icons/else-active.svg":_.src="../img/icons/else.svg"}),document.querySelector(".promo-form__actual-link").addEventListener("click",function(){document.querySelector("#select-6").classList.toggle("select--active"),document.querySelector(".promo-form__actual-link").classList.toggle("promo-form__actual-link--absolute"),document.querySelector("#select-6").classList.contains("select--active")?document.querySelector(".promo-form__actual-link").textContent="Вернуться":document.querySelector(".promo-form__actual-link").textContent="Выбрать из списка"}),document.querySelector("#select-6 .select__toggle").addEventListener("click",function(){document.querySelector(".promo-form__actual-link").classList.toggle("promo-form__actual-link--absolute")}),document.querySelector("#time").placeholder=(new Date).toLocaleTimeString("en-US",{hour12:!1,hour:"numeric",minute:"numeric"});var o=new Date,p=String(o.getDate()).padStart(2,"0"),o=String(o.getMonth()+1).padStart(2,"0")+"."+p+"."+o.getFullYear();document.querySelector("#date").placeholder=o,IMask(document.getElementById("phone"),{mask:"+{7} (000) 000 - 00 - 00"}),IMask(document.getElementById("consultation__phone"),{mask:"+{7} (000) 000 - 00 - 00"}),IMask(document.getElementById("questions__phone"),{mask:"+{7} (000) 000 - 00 - 00"}),document.getElementById("time").addEventListener("click",function(){IMask(document.getElementById("time"),{mask:"00{:}00",lazy:!1})}),new l("#select-8",{name:"duration",targetValue:"1 hour",options:[["1 hour","1 час"],["2 hours","2 часа"],["3 hours","3 часа"]]});window.screen.availWidth<1023?new AirDatepicker("#date",{isMobile:!0}):new AirDatepicker("#date");const h=new JustValidate("#promo-form",{errorFieldCssClass:"is-invalid"}),g=new JustValidate("#consultation__form",{errorFieldCssClass:"is-invalid"}),v=new JustValidate("#questions__form",{errorFieldCssClass:"is-invalid"});let f=document.querySelectorAll(".promo-form__input--hidden"),y=document.querySelector(".promo-form"),S=document.querySelector(".promo-form__clean"),q=document.querySelectorAll(".promo-form div"),L=document.querySelectorAll(".promo-form__block");for(let e=0;e<q.length;e++)q[e].addEventListener("click",function(){y.classList.add("promo-form--active"),window.screen.availWidth<1023?document.querySelector(".services").style.paddingTop="970px":document.querySelector(".services").style.paddingTop="453px";for(let e=0;e<f.length;e++)f[e].classList.add("promo-form__input--active");for(let e=0;e<L.length;e++)L[e].classList.add("promo-form__block--active")});function w(e){e=new FormData(e);let t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&200===t.status&&console.log("Отправлено")},t.open("POST","../mail.php",!0),t.send(e),document.querySelector("#promo-form").reset(),h.refresh()}S.addEventListener("click",function(){window.screen.availWidth<1023?document.querySelector(".services").style.paddingTop="390px":document.querySelector(".services").style.paddingTop="150px",y.classList.remove("promo-form--active"),document.querySelector("#promo-form").reset();for(let e=0;e<f.length;e++)f[e].classList.remove("promo-form__input--active");for(let e=0;e<L.length;e++)L[e].classList.remove("promo-form__block--active");h.refresh()}),g.addField("#consultation__phone",[{rule:"required",errorMessage:" "}]).onSuccess(e=>{w(document.querySelector("#consultation__form"))}),v.addField("#questions__phone",[{rule:"required",errorMessage:" "}]).onSuccess(e=>{w(document.querySelector("#questions__form"))}),h.addField("#name",[{rule:"required",errorMessage:" "}]).addField("#phone",[{rule:"required",errorMessage:" "}]).addRequiredGroup(".promo-form__stops"," ").onSuccess(e=>{w(document.querySelector("#promo-form")),y.classList.remove("promo-form--active"),document.querySelector("#promo-form").reset();for(let e=0;e<f.length;e++)f[e].classList.remove("promo-form__input--active");for(let e=0;e<L.length;e++)L[e].classList.remove("promo-form__block--active");h.refresh()});for(let e=0;e<document.querySelectorAll(".promo-form__stops input").length;e++)document.querySelectorAll(".promo-form__stops input")[e].addEventListener("change",function(){h.removeGroup(".promo-form__stops")});document.querySelector(".promo-form__button").addEventListener("click",function(){setTimeout(function(){1==document.querySelector("#name").classList.contains("is-invalid")&&(document.querySelector("#name").placeholder="Введите имя"),1==document.querySelector("#phone").classList.contains("is-invalid")&&(document.querySelector("#phone").placeholder="Введите телефон")},500)}),document.querySelector(".promo-form__add-adress").addEventListener("click",function(){let e=document.createElement("div");e.innerHTML=document.querySelector("#middleStop").innerHTML,document.querySelector(".promo-form__stops").insertBefore(e,document.querySelector(".promo-form__stops").children[1]),$(".promo-form__input--address").suggestions({token:"3b5a250afeed87ba3c5782b639296f750d220161",type:"ADDRESS",onSelect:function(e){console.log(e)}})});const b=document.querySelector(".tabs"),k=document.querySelectorAll(".tabs__btn"),E=document.querySelectorAll(".tabs__content"),T=(b&&b.addEventListener("click",e=>{e.target.classList.contains("tabs__btn")&&(e=e.target.dataset.tabsPath,k.forEach(e=>{e.classList.remove("tabs__btn--active")}),document.querySelector(`[data-tabs-path="${e}"]`).classList.add("tabs__btn--active"),T(e))}),e=>{E.forEach(e=>{e.classList.remove("tabs__content--active")}),document.querySelector(`[data-tabs-target="${e}"]`).classList.add("tabs__content--active")});function x(e){let t=document.querySelector(".accordion__header--"+e),o=document.querySelector(".accordion__body--"+e),r=document.querySelector(`.accordion__header--${e} .accordion__arrow`);t.addEventListener("click",function(){t.classList.toggle("accordion__header--active"),o.classList.toggle("accordion__body--active"),r.classList.toggle("accordion__arrow--active")})}x("apartaments-with-movers"),x("apartaments"),x("office"),x("country-house"),document.querySelector("#consultation__phone").addEventListener("change",()=>{document.querySelector(".consultation__phone-wrapper").classList.add("consultation__phone-wrapper--active")}),document.querySelector("#questions__phone").addEventListener("change",()=>{document.querySelector(".questions__phone-wrapper").classList.add("questions__phone-wrapper--active")}),document.querySelector(".consultation__button").addEventListener("click",()=>{1==document.querySelector("#consultation__phone").classList.contains("is-invalid")&&(document.querySelector(".consultation__phone-wrapper").classList.remove("consultation__phone-wrapper--active"),document.querySelector("#consultation__phone").placeholder="Введите телефон")}),document.querySelector(".questions__button").addEventListener("click",()=>{1==document.querySelector("#questions__phone").classList.contains("is-invalid")&&(document.querySelector(".questions__phone-wrapper").classList.remove("questions__phone-wrapper--active"),document.querySelector("#questions__phone").placeholder="Введите телефон")}),$(".promo-form__input--address").suggestions({token:"3b5a250afeed87ba3c5782b639296f750d220161",type:"ADDRESS",onSelect:function(e){console.log(e)}})});